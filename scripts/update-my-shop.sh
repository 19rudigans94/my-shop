#!/bin/bash

# –¶–≤–µ—Ç–∞ –¥–ª—è –≤—ã–≤–æ–¥–∞
GREEN='\033[0;32m'
NC='\033[0m' # –ë–µ–∑ —Ü–≤–µ—Ç–∞

echo -e "${GREEN}üìÅ –ü–µ—Ä–µ—Ö–æ–¥ –≤ –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞...${NC}"
cd ~/my-shop || { echo "‚ùå –ü–∞–ø–∫–∞ my-shop –Ω–µ –Ω–∞–π–¥–µ–Ω–∞"; exit 1; }

echo -e "${GREEN}üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ Git...${NC}"
git pull origin main || { echo "‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ git pull"; exit 1; }

echo -e "${GREEN}üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π...${NC}"
npm install || { echo "‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π"; exit 1; }

echo -e "${GREEN}üõ† –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞...${NC}"
npm run build || { echo "‚ùå –û—à–∏–±–∫–∞ —Å–±–æ—Ä–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞"; exit 1; }

echo -e "${GREEN}üöÄ –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–∞ —á–µ—Ä–µ–∑ PM2...${NC}"
pm2 restart my-shop || { echo "‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ PM2"; exit 1; }

echo -e "${GREEN}‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ —É—Å–ø–µ—à–Ω–æ.${NC}"